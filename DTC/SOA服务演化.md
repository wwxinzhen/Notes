

##### 1、SOA

​	公共业务被拆分出来，形成可用的共用服务，最大程度的保障了代码和逻辑的复用，避免重复建设，这种设计也成为SOA（Service-Oriented Architecture）。

##### 2、服务路由

​	SOA架构中，服务消费者通过服务名称，在众多服务中找到目标服务地址列表成为服务路由。

![image-20210528144314646](C:\Users\wuxinzhen1\AppData\Roaming\Typora\typora-user-images\image-20210528144314646.png)

服务路由核心即一个服务名和服务地址列表的映射关系。从早期的配置文件发展到现在的分布式配置中心。

##### 3、负载均衡

​	对于负载较高的服务，往往都是集群发布，在请求到来时，需要将请求均衡地分配到后端服务器，负载均衡程序将会从服务地址列表中，按照负载均衡算法，选择一台机器进行访问。

![20190227094927972](E:\wuxz\20190227094927972.png)

##### 4、服务演变

​	服务规模较小时，可以采用硬编码的方式，将服务地址和配置写在代码里，通过编码解决路由和负载均衡问题。服务规模较小时，采用配置的方式进行SOA架构还是可以的，因为服务数量可控，维护成本能够接受。

![20190227095756815](E:\wuxz\20190227095756815.png)

​	但是当服务规模在扩大时，服务变得越来越多，架构形式即发生了改变。这个时候其实会有一个突出问题-单点故障：服务路由down了，所有的服务都无法访问了；负载均衡服务down了，服务也无法访问。因此这种构架对单点稳定性要求较高，同时管理这些不断增加的服务配置也愈发困难。

![20190227100709785](E:\wuxz\20190227100709785.png)

服务数量激增，需要一个**动态注册和获取服务信息**的地方，统一管理服务名称和对应的地址列表，即引入服务配置中心。基于ZooKeeper的路由和负载均衡架构如下：

![20190227102153502](E:\wuxz\20190227102153502.png)

​	RPC:Remote Procedure Call